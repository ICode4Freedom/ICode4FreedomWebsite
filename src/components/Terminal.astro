---
// Terminal component with interactive commands
// Commands: help, clear, blogs, about, contact, subscribe, theme, now, rss, social

interface Props {
  blogs?: Array<{
    title: string;
    url: string;
    description: string;
    tags: string[];
  }>;
}

const { blogs = [] } = Astro.props;
---

<div class="terminal">
  <div class="terminal-header">
    <div class="terminal-buttons">
      <span class="terminal-btn close"></span>
      <span class="terminal-btn minimize"></span>
      <span class="terminal-btn maximize"></span>
    </div>
    <span class="terminal-title">icode4freedom@terminal ~ </span>
    <button id="theme-toggle-btn" class="theme-toggle" title="Toggle theme">ğŸŒ“</button>
  </div> 
  <div class="terminal-body">
    <div id="output">
      <div class="output-line tagline">Building in public. Learning out loud.</div>
      <div class="output-line ascii-art">
{`
â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘
â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•     â•šâ•â•â•šâ•â•     â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•
`}
      </div>
      <div class="output-line typing-line" id="welcome-line"></div>
      <div class="output-line typing-line" id="help-line"></div>
      <div class="output-line">&nbsp;</div>
    </div>
    <div class="input-line">
      <span class="prompt">$ </span>
      <input type="text" id="command-input" autocomplete="off" spellcheck="false">
      <span class="cursor">_</span>
    </div>
  </div>
</div>

<!-- Pass blog data to JS -->
<script define:vars={{ blogs }}>
  window.__TERMINAL_BLOGS__ = blogs;
</script>

<script>
  const output = document.getElementById('output');
  const input = document.getElementById('command-input') as HTMLInputElement;
  const blogs = (window as any).__TERMINAL_BLOGS__ || [];
  
  const commandHistory: string[] = [];
  let historyIndex = -1;

  // Typing animation for welcome messages
  function typeText(element: HTMLElement, text: string, speed: number = 50): Promise<void> {
    return new Promise((resolve) => {
      let i = 0;
      element.textContent = '';
      const timer = setInterval(() => {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
        } else {
          clearInterval(timer);
          resolve();
        }
      }, speed);
    });
  }

  // Run typing animation on load
  async function initTypingAnimation() {
    const welcomeLine = document.getElementById('welcome-line');
    const helpLine = document.getElementById('help-line');
    
    if (welcomeLine) {
      await typeText(welcomeLine, 'Welcome to ICode4Freedom Terminal v1.0', 40);
    }
    if (helpLine) {
      // Add slight delay then type help message
      await new Promise(r => setTimeout(r, 300));
      helpLine.innerHTML = 'Type <span class="cmd-highlight">help</span> for available commands.';
      helpLine.style.opacity = '0';
      helpLine.style.transition = 'opacity 0.3s';
      setTimeout(() => { helpLine.style.opacity = '1'; }, 50);
    }
  }

  // Theme toggle functionality
  function initTheme() {
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
  }

  function toggleTheme() {
    const current = document.documentElement.getAttribute('data-theme') || 'dark';
    const newTheme = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    return `Theme switched to ${newTheme} mode.`;
  }

  // Initialize theme on load
  initTheme();

  // Theme toggle button
  const themeBtn = document.getElementById('theme-toggle-btn');
  if (themeBtn) {
    themeBtn.addEventListener('click', () => {
      toggleTheme();
    });
  }

  const commands: Record<string, (args: string[]) => string | string[]> = {
    help: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘           AVAILABLE COMMANDS               â•‘',
      'â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£',
      'â•‘  help      - Show this help message        â•‘',
      'â•‘  clear     - Clear the terminal            â•‘',
      'â•‘  about     - About Mike                    â•‘',
      'â•‘  skills    - Technical skills              â•‘',
      'â•‘  projects  - Current projects              â•‘',
      'â•‘  blogs     - List all blog posts           â•‘',
      'â•‘  read <n>  - Preview blog post #n          â•‘',
      'â•‘  tags      - Show all available tags       â•‘',
      'â•‘  social    - Social links & stats          â•‘',
      'â•‘  contact   - Contact information           â•‘',
      'â•‘  hire      - Work with me                  â•‘',
      'â•‘  now       - What I\'m doing now            â•‘',
      'â•‘  subscribe - Newsletter signup             â•‘',
      'â•‘  rss       - RSS feed info                 â•‘',
      'â•‘  theme     - Toggle dark/light mode        â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      ''
    ],
    
    clear: () => {
      if (output) output.innerHTML = '';
      return '';
    },
    
    blogs: () => {
      if (blogs.length === 0) {
        return 'No blog posts found.';
      }
      const lines = ['', 'ğŸ“š BLOG POSTS:', 'â”€'.repeat(40)];
      blogs.forEach((blog: any, i: number) => {
        lines.push(`  [${i + 1}] ${blog.title}`);
        if (blog.tags && blog.tags.length > 0) {
          lines.push(`      Tags: ${blog.tags.join(', ')}`);
        }
      });
      lines.push('â”€'.repeat(40));
      lines.push('Use "read <number>" to preview a post');
      lines.push('');
      return lines;
    },
    
    read: (args: string[]) => {
      const num = parseInt(args[0]);
      if (isNaN(num) || num < 1 || num > blogs.length) {
        return `Usage: read <1-${blogs.length}>`;
      }
      const blog = blogs[num - 1];
      return [
        '',
        'â•'.repeat(50),
        `ğŸ“„ ${blog.title}`,
        'â•'.repeat(50),
        '',
        `Description: ${blog.description}`,
        '',
        blog.tags?.length ? `Tags: ${blog.tags.join(', ')}` : '',
        '',
        `â†’ Read full post: ${blog.url}`,
        '',
        'â”€'.repeat(50),
        ''
      ].filter(l => l !== undefined);
    },
    
    tags: () => {
      const allTags = new Set<string>();
      blogs.forEach((blog: any) => {
        if (blog.tags) {
          blog.tags.forEach((tag: string) => allTags.add(tag));
        }
      });
      if (allTags.size === 0) {
        return 'No tags found.';
      }
      return ['', 'ğŸ·ï¸  AVAILABLE TAGS:', 'â”€'.repeat(30), ...Array.from(allTags).map(t => `  â€¢ ${t}`), ''];
    },
    
    about: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘                         ABOUT MIKE                                   â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  Hey! I\'m Mike, aka ICode4Freedom (corny, I know).',
      '',
      '  24 y/o CS grad â€¢ First-year Software Engineer',
      '  Expertise: Big Data, Process Automation, AI/ML, Web Dev',
      '  Languages: Python, C++',
      '',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '',
      '  This blog is about technology, book reviews, philosophy,',
      '  and whatever else I feel like writing about.',
      '',
      '  I\'m nothing special â€” not a 4.0 student, not FAANG,',
      '  not running startups with $100M ARR. Just a regular',
      '  software bro who\'s thankful for his first job and',
      '  working hard to be successful.',
      '',
      '  Life throws curveballs. I\'ve had wins and failures.',
      '  Everyone\'s life has something to learn from.',
      '',
      '  Thanks for being here. ğŸ¤',
      '',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  Built with Astro â€¢ Powered by curiosity & caffeine â˜•',
      ''
    ],
    
    skills: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘              TECHNICAL SKILLS                â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  LANGUAGES',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  Python      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  85%',
      '  C++         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  75%',
      '  JavaScript  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  65%',
      '  SQL         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  75%',
      '',
      '  EXPERTISE',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  â€¢ Big Data & Process Automation',
      '  â€¢ AI/ML & Data Science',
      '  â€¢ Web Development (Astro, React)',
      '  â€¢ Backend Systems',
      '',
      '  TOOLS',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  Git â€¢ Docker â€¢ AWS â€¢ PostgreSQL â€¢ Redis',
      ''
    ],
    
    projects: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘             CURRENT PROJECTS                 â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  ğŸš€ ABLE - Aggregated Behavior Leveraging Engine',
      '     Real-time market event aggregation system',
      '     Status: In Development',
      '',
      '  ğŸŒ ICode4Freedom.com',
      '     Personal blog & brand homepage',
      '     Status: Live âœ“',
      '',
      '  ğŸ’¡ More coming soon...',
      '',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  Follow along on X @ICode4Freedom',
      ''
    ],
    
    social: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘               CONNECT WITH ME                â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  ğ•  Twitter/X    â†’ @ICode4Freedom',
      '     â””â”€ 164 followers and growing! ğŸ“ˆ',
      '',
      '  ğŸ“¦ GitHub       â†’ github.com/MichaelACraig',
      '  ğŸ’¼ LinkedIn     â†’ linkedin.com/in/michael-a-craig',
      '  â˜• BuyMeACoffee â†’ buymeacoffee.com/ICode4Freedom',
      '',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  DMs are open. Let\'s connect!',
      ''
    ],
    
    contact: () => [
      '',
      'ğŸ“¬ CONTACT:',
      'â”€'.repeat(40),
      '  Email: michael@icode4freedom.com',
      '  X/Twitter: @ICode4Freedom',
      '  GitHub: github.com/MichaelACraig',
      '',
      '  Prefer email for business inquiries.',
      ''
    ],
    
    hire: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘              WORK WITH ME                    â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  I\'m open to:',
      '  â€¢ Freelance projects',
      '  â€¢ Consulting (Big Data, Automation, AI/ML)',
      '  â€¢ Collaboration on interesting projects',
      '  â€¢ Speaking opportunities',
      '',
      '  What I bring:',
      '  â€¢ Strong Python/C++ background',
      '  â€¢ Big data & process automation expertise',
      '  â€¢ Fast learner, ship-first mentality',
      '',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  ğŸ“§ michael@icode4freedom.com',
      '  Let\'s build something cool.',
      ''
    ],
    
    now: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘              WHAT I\'M DOING NOW              â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  Check out my /now page for current focus:',
      '',
      '  â†’ https://icode4freedom.com/now',
      '',
      '  Updated regularly with what I\'m working on,',
      '  learning, reading, and thinking about.',
      ''
    ],
    
    subscribe: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘             ğŸ“¬ STAY IN THE LOOP              â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  Want updates on new posts and projects?',
      '',
      '  ğŸ“§ Email me at: michael@icode4freedom.com',
      '     Subject: "Subscribe to Newsletter"',
      '',
      '  ğŸ¦ Or follow on X: @ICode4Freedom',
      '     for real-time updates!',
      '',
      '  ğŸ“¡ RSS Feed: /rss.xml',
      '',
      '  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '  No spam, just good stuff. Promise.',
      ''
    ],
    
    rss: () => [
      '',
      'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—',
      'â•‘                 ğŸ“¡ RSS FEED                  â•‘',
      'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•',
      '',
      '  Subscribe via RSS to get new posts:',
      '',
      '  â†’ https://icode4freedom.com/rss.xml',
      '',
      '  Add this URL to your favorite RSS reader',
      '  (Feedly, Inoreader, NetNewsWire, etc.)',
      ''
    ],
    
    theme: () => {
      return toggleTheme();
    },
    
    whoami: () => 'visitor@icode4freedom.com',
    
    date: () => new Date().toLocaleString(),
    
    echo: (args: string[]) => args.join(' ') || '',
    
    neofetch: () => [
      '',
      '       â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„        visitor@icode4freedom',
      '      â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€',
      '     â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ      OS: Web Browser',
      '    â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ     Host: icode4freedom.com',
      '   â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ    Kernel: Astro v5.x',
      '   â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ    Uptime: Since you arrived',
      '   â–ˆâ–‘â–‘â–€â–€â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–€â–€â–‘â–‘â–‘â–ˆ     Shell: Terminal v1.0',
      '   â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ     Theme: Matrix Dark',
      '   â–ˆâ–‘â–‘â–‘â–‘â–‘â–ˆâ–€â–€â–€â–€â–€â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–ˆ     Terminal: 80x24',
      '   â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ     CPU: Your Brain',
      '    â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ      Memory: Hopefully good',
      '     â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ       ',
      '      â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ        ',
      ''
    ]
  };

  function printOutput(text: string | string[]) {
    if (!output) return;
    const lines = Array.isArray(text) ? text : [text];
    lines.forEach(line => {
      const div = document.createElement('div');
      div.className = 'output-line';
      div.textContent = line;
      output.appendChild(div);
    });
  }

  function processCommand(cmd: string) {
    const trimmed = cmd.trim();
    if (!trimmed) return;
    
    // Add command echo
    printOutput(`$ ${trimmed}`);
    
    // Add to history
    commandHistory.unshift(trimmed);
    historyIndex = -1;
    
    const [command, ...args] = trimmed.toLowerCase().split(/\s+/);
    
    if (commands[command]) {
      const result = commands[command](args);
      if (result) {
        printOutput(result);
      }
    } else {
      printOutput(`Command not found: ${command}. Type "help" for available commands.`);
    }
    
    // Scroll to bottom
    const terminalBody = document.querySelector('.terminal-body');
    if (terminalBody) {
      terminalBody.scrollTop = terminalBody.scrollHeight;
    }
  }

  if (input) {
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        processCommand(input.value);
        input.value = '';
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        if (historyIndex < commandHistory.length - 1) {
          historyIndex++;
          input.value = commandHistory[historyIndex];
        }
      } else if (e.key === 'ArrowDown') {
        e.preventDefault();
        if (historyIndex > 0) {
          historyIndex--;
          input.value = commandHistory[historyIndex];
        } else {
          historyIndex = -1;
          input.value = '';
        }
      }
    });
    
    // Focus input when clicking anywhere in terminal
    document.querySelector('.terminal')?.addEventListener('click', () => {
      input.focus();
    });
  }

  // Start typing animation after a short delay
  setTimeout(initTypingAnimation, 500);
</script>

<style>
  .terminal {
    width: 100%;
    max-width: 55rem;
    background: var(--term-bg);
    border-radius: 8px;
    border: 2px solid var(--term-bc);
    font-family: var(--font-mono);
    font-size: 14px;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
  }

  .terminal-header {
    background: linear-gradient(to bottom, #3c3c3c, #2a2a2a);
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid #1a1a1a;
  }

  .terminal-buttons {
    display: flex;
    gap: 8px;
  }

  .terminal-btn {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    cursor: pointer;
  }

  .terminal-btn.close { background: #ff5f56; }
  .terminal-btn.minimize { background: #ffbd2e; }
  .terminal-btn.maximize { background: #27ca40; }

  .terminal-title {
    color: #999;
    font-size: 12px;
    flex: 1;
  }

  .theme-toggle {
    background: transparent;
    border: 1px solid #555;
    border-radius: 4px;
    padding: 2px 8px;
    cursor: pointer;
    font-size: 14px;
    opacity: 0.7;
    transition: opacity 0.2s;
  }

  .theme-toggle:hover {
    opacity: 1;
  }

  .terminal-body {
    padding: 12px;
    height: 400px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--fg) var(--term-bg);
  }

  .output-line {
    color: var(--term-tc);
    line-height: 1.4;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .output-line.tagline {
    color: var(--terminal-green);
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 8px;
    text-shadow: 0 0 10px var(--terminal-green);
  }

  .output-line.ascii-art {
    color: var(--terminal-green);
    font-size: 8px;
    line-height: 1.0;
    overflow-x: auto;
    white-space: pre;
  }

  @media (min-width: 900px) {
    .output-line.ascii-art {
      font-size: 9px;
    }
  }

  @media (min-width: 1200px) {
    .output-line.ascii-art {
      font-size: 10px;
    }
  }

  .cmd-highlight {
    color: var(--terminal-green);
    font-weight: bold;
  }

  .input-line {
    display: flex;
    align-items: center;
    margin-top: 4px;
  }

  .prompt {
    color: var(--terminal-green);
    margin-right: 8px;
    font-weight: bold;
  }

  #command-input {
    background: transparent;
    border: none;
    color: var(--term-tc);
    font-family: var(--font-mono);
    font-size: 14px;
    flex: 1;
    outline: none;
    caret-color: transparent;
  }

  .cursor {
    color: var(--terminal-green);
    animation: blink 1s steps(1) infinite;
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
</style>